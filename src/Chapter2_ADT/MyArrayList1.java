package Chapter2_ADT;

import java.awt.geom.GeneralPath;
import java.util.Calendar;

import org.omg.CORBA.Any;

class MyArrayList1 <AnyType> implements Iterable<AnyType>  {
	//基本元素
	private static final int DEFAULT_CAPCITY=10;
	private int theSize;
	private AnyType [] theItems;
	//最基本方法
	public MyArrayList1(){
		doClear();
	}
	public void doClear(){
		theSize=0;
		ensureCapcity(DEFAULT_CAPCITY);
	}
	public void clear(){
		doClear();
	}
	public int size(){
		return theSize;
	}
	public boolean isEmpty(){
		return(size()==0);
	}
	//trimsize()
	public void trimSize(){
		//去掉没用的空位置
		ensureCapcity(size());
	}
	//get and set method()
	//有异常的抛出
	public AnyType get(int id){
		//异常检测
		if ((id<0)||(size()<id)) {
			throw new ArrayIndexOutOfBoundsException();
		}
		return theItems[id];
	}
	public AnyType set(int id,AnyType x){
		//异常检测
		if ((id<0)||(size()<id)) {
			throw new ArrayIndexOutOfBoundsException();
		}
		AnyType old;
		old=theItems[id];
		theItems[id]=x;
		return old;
	}
	//数组容量扩展
	public void ensureCapcity(int newCapcity){
		//如果size（）大于newcapcity，这是不允许的
		if (size()>newCapcity) {
			return;
		}
		//拓展数组,固定步骤
		AnyType [] old=theItems;
		theItems=(AnyType[]) new Object[newCapcity];
		for (int i = 0; i < size(); i++) {
			theItems[i]=old[i];
		}
	}
	//add method()
	//两种情形下的add（）；这里使用相同的名字来兼容两种方法
	//add 最后位置
	public boolean add(AnyType x){
		add(size(), x);
		return true;
	}
	//add2
	public void add(int id,AnyType x){
		//判断需不需要数组容量扩展,使用theitem.length
		if (theItems.length==id) {
			ensureCapcity(size()*2+1);
		}
		//add()
		for (int i=size(); i <id; i--) {
			theItems[i]=theItems[i-1];
		}
		theItems[id]=x;
		//由于数组有效个数改变所以得认为手动改变个数：
		++theSize;
	}
	//remove()
	public AnyType remove(int id){
		AnyType itemRemoved=theItems[id];//存一下
		for (int i = id; i <size()-1; i++) {
			theItems[i]=theItems[i+1];
		}
		theSize--;
		return itemRemoved;
	}
	//iterator
	//由于MyArrayList实现了Iterable接口所以，得实现iterator（）方法
	//但是iterato（）方法有固定的格式：规定返回一个Iterator接口类型的对象
	//所以得写一个内部类来实现Iterator接口
	//实现iterator（）方法
	public java.util.Iterator<AnyType> iterator(){
		                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               return new ArrayListIterator();
	}
	private class ArrayListIterator implements java.util.Iterator<AnyType>{
		//由于是从头遍历所以从0开始
		private int current=0;
		//hasnext（）
		//next
		//remove
		public boolean hasNext(){
			return(current<size());
		}
		public AnyType next(){
			//异常检测
			if (!hasNext()) {
				throw new java.util.NoSuchElementException();
			}
			return theItems[++current];
		}
		//由于上述qunext（）方法一定会改变current，所以remove也一定成立，这里的remove使用的是外部类中的remove（）
		public void remove(){
			MyArrayList1.this.remove(current--);
		}
		
		//未完待续。。。。
		//LODING。。。。。。
		
	}
	
	

}
